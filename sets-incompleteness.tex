\section{Теоремы Гёделя}

В прошлом параграфе мы строго определили аксиомы теории множеств. Сейчас мы копнём немного глубже и попытаемся понять насколько приведённый нами формализм полноценен.

Когда мы в первой главе говорили о теориях в самом общем виде, то мы упоминали два возможных свойства теорий: полноту и непротиворечивость. Напомню эти определения (теперь в несколько более формальном виде):

{\bfseries Определение.} Теория $T$ называется {\slshape полной}, если для любого предложения $\phi$ либо $T\vdash\phi$, либо $T\vdash\neg\phi$.

{\bfseries Определение.} Теория $T$ называется {\slshape непротиворечивой}, если ни для какой формулы не может быть одновременно $T\vdash \phi$ и $T\vdash\neg\phi$.

В первой главе мы так же доказывали, что из противоречивых теорий можно вывести любую формулу. Этот факт будет нами использоваться ниже.

Является ли ZFC полной и непротиворечивой? Ответ на этот вопрос дают следующие две теоремы (доказательства мы проведём ниже, а пока только сформулируем и обсудим эти утверждения):

{\bfseries Первая теорема Гёделя о неполноте.} Никакая аксиоматическая система, в которой возможно описать арифметику натуральных чисел, не является полной.

{\bfseries Вторая теорема Гёделя о неполноте.} Ни для какой аксиоматической системы, в которой возможно описать арифметику натуральных чисел, невозможно доказать её непротиворечивость.

То есть результаты прямо скажем неутешительные. Если говорить простыми словами, то здесь говорится о том, что существуют некоторые теоремы, которые мы никогда не сможем доказать, причём доказуемость этих теорем совершенно никак не зависит от системы аксиом, которую мы придумаем. Что бы мы там ни напридумывали вместо ZFC, все равно полученная аксиоматика будет неполной.

Это, впрочем, не особенно большая проблема: недоказуемую теорему можно принять как новую аксиому и спокойно себе жить дальше (можно так же принять и её отрицание, и тоже спокойно себе жить дальше). Вторая теорема Гёделя звучит куда страшнее: если наша теория непротиворечива, то мы никогда не сможем этого доказать. То есть если противоречие есть, мы доказать это можем: достаточно найти формулу $\phi$, чтобы одновременно с ней мы могли вывести и её отрицание. Если же такой формулы в действительности нет и теория наша непротиворечива, то мы этого доказать никогда не сможем. Впрочем, за примерно сотню лет истории ZFC (смотря с какого момента начинать отсчитывать её историю), противоречий найти так и не удалось, поэтому есть надежда на то, что ZFC всё же непротиворечива.

Может возникнуть вопрос, что же случится в случае, если в ZFC все же обнаружат противоречия? На самом деле и тут страшного ничего не приключится: большинство теорий, базой которых является теория множеств, могут быть переформулированы и без неё, хотя и менее удобно. Например, мы могли бы сформулировать теорию ориентированных графов с петлями не прибегая к множествам следующим образом: константные символы мы бы разбили на вершины и дуги, и ввели бы операции $\mathrm{dom}$ и $\mathrm{codom}$, которые каждой дуге ставили бы в соответствие её начальные и конечные вершины. Формально дугу от вершины можно было бы отличить формулой типа $\exists v, v=\mathrm{dom}(a)$, которая истинна тогда и только тогда, когда $a$ является дугой. Продолжая подобные рассуждения можно было бы сформулировать целиком теорию графов, а так же сформулировав дополнительные аксиомы избавиться от ориентированности дуг и от петель. Другое дело, что определение теорий в таком виде оказывается куда сложнее, чем на языке теории множеств, однако при этом мы уже не зависим от ZFC и не страшимся её противоречий. Аналоги для теорий, переформулированные без теории множеств, обычно называются метатеориями. Так, сформулированное мной только что можно было бы назвать метаграфом. Никто всерьёз, правда, таким не занимается, да и если найдутся все же противоречия в ZFC, они скорее всего будут исправлены переформулировкой аксиом, а в целом фундамент теории множеств останется таким же.

Здесь полезно вспомнить так же и о моделях. В первой главе мы вводили их довольно неформально, но теперь мы можем определить понятие модели более-менее строго:

{\bfseries Определение.} {\slshape Сигнатурой} называется набор нелогических символов с правилами их использования, то есть с указанием, являются ли они символами операции, отношения либо константными, и указанием количества параметров, используемых вместе с этими символами.

Мы можем говорить о сигнатуре некоторой теории или отдельной формулы. Например, сигнатуру ZFC можно описать единственным символом $\in$, для которого указано, что это символ отношения, и что он имеет ровно два параметра. Любая формула ZFC имеет ту же сигнатуру. То есть сигнатура это в некотором смысле язык, на котором мы описываем нашу теорию.

{\bfseries Определение.} {\slshape Структурой} заданной сигнатуры называется такое множество формул $S$, что для любой формулы заданной сигнатуры либо $\phi\in S$, либо $\neg\phi \in S$ (если $\phi\in S$, то это обозначается как $S\models\phi$).

{\bfseries Определение.} Структура $M$ теории $T$ называется {\slshape моделью} этой теории, если сигнатуры структуры $M$ и теории $T$ совпадают, и если для любого предложения $T\vdash\phi$ так же верно $M\models\phi$.

Фактически структура — это набор утверждений об истинности конкретных формул. Модель — структура, в которой истинны все формулы заданной теории.

В терминах теории моделей можно переформулировать понятия полноты и непротиворечивости следующим образом:

{\bfseries Определение.} Теория называется {\slshape полной}, если для неё существует единственная модель.

{\bfseries Определение.} Теория называется {\slshape непротиворечивой}, если для неё в принципе существуют модели.

Эквивалентность двух определений непротиворечивости довольно очевидна. Если теория полна, то очевидно так же, что она имеет единственную модель. Если моделей теория имеет несколько, то это означает, что существуют предложения, которые могут быть ложны либо истинны в зависимости от модели, и они стало быть не могут быть выведены.

Однако с моделями имеется определённая напасть: чтобы сформулировать определение модели, мы опять использовали понятие множеств, и стало быть мы закладывались на непротиворечивость ZFC. Может показаться, что в таком свете теория моделей становится бесполезной для изучения теории множеств, однако это не так (хотя многие математики избегают при определении моделей пользоваться терминологией теории множеств, и говорят, что структура $S$ это не множество, а просто набор записей вида $S\models\phi$ либо $S\models \neg\phi$ для каждого предложения $\phi$, что в общем-то конечно избегает использования ZFC, но не приводит к каким-то сильно ощутимым бонусам). Вполне справедливы и полезны рассуждения, когда из самой гипотезы непротиворечивости мы определяем понятие модели и предполагаем существование хотя бы одной из них, а отсюда мы уже доказываем существование каких-то других моделей. Так, например, если предположить непротиворечивость ZF, то из существования хотя бы какой-то модели ZF (неизвестно даже точно какой именно), мы можем используя конструкции теории множеств показать, что будут неминуемо существовать ещё по крайней мере две модели: та, в которой верна аксиома выбора, и та, в которой она неверна.

Мы пока не будем углубляться в подобные доказательства (хотя в последующих главах я приведу наброски подобных рассуждений), а отметим просто такой факт: если в неполной теории мы нашли невыводимую формулу $\phi$, то мы можем прибавить её к нашему набору аксиом и вновь получим непротиворечивую аксиоматику. А можем прибавить и отрицание этой формулы, и полученная аксиоматика так же будет непротиворечива. Нечто подобное произошло с геометриями Евклида и Лобачевского: в евклидовой геометрии утверждается, что через точку, не лежащую на заданной прямой, возможно провести лишь одну прямую, параллельную заданной, а в геометрии Лобачевского утверждается, что таких параллельных прямых окажется бесконечно много. И причём если геометрия Евклида непротиворечива, то именно из геометрии Евклида можно вывести и непротиворечивость геометрии Лобачевского. Несколько подробнее, хотя тоже не формально, а в виде исторического очерка, мы рассмотрим это в следующем параграфе.

Перейдём теперь непосредственно к доказательству теорем Гёделя.

{\bfseries Доказательство первой теоремы.} Для начала мы сделаем набросок доказательства, опускающий ряд технических деталей, чтобы была просто понятная идея. Эти технические детали мы ниже сформулируем отдельной леммой с доказательством.

Предположим, что каждую формулу и каждое доказательство можно каким-то образом пронумеровать. Номер формулы  будем обозначать символом $g$, а номер доказательства символом $G$. Эти номера мы будем называть {\slshape гёделевскими номерами}. Так же предположим, что мы можем каким-то образом записать формулу $pf(x, y)$, которая обращается в истину тогда и только тогда, когда $x$ является номером доказательства для формулы под номером $y$.

Идея доказательства  сводится к формулированию такого предложения теории, которое каким-то образом ссылалось бы само на себя. В общих чертах это делается таким образом: если рассмотреть формулу $F(x)$, имеющую одну свободную переменную, то для неё существует некоторый номер $n=g(F)$. Тогда формула $F(n)$ будет косвенно ссылаться на саму себя. Наша задача сейчас сводится к тому, чтобы сформулировать $F(x)$ таким образом, чтобы она заключала в себе утверждение о доказуемости формулы с номером $x$ (вспомните теорему из первой главы «эту теорему невозможно доказать» — мы сейчас как раз занимаемся построением такой теоремы).

Чтобы получить в теореме ссылку на саму себя, определим формулу $q(x, g(F)) = \neg pf(x, g(F(g(F))))$. То есть если словами, то $q(x, g(F))$, означает, что $x$ не является номером доказательства для $F(g(F))$. Последнее как раз и содержит утверждение, ссылающееся само на себя. Сама форма $q(x, y)$ вначале преобразовывает $y$ (некоторый номер) в номер формулы со ссылкой на себя, и обращается в истину только тогда, когда $x$ не является доказательством для полученной формулы. Возможность формирования такой формулы мы опять же докажем ниже как лемму.

Теперь мы можем рассмотреть такую формулу: $P(x) = \forall y q(y, x)$. Она, во-первых, имеет некоторый номер $g(P)$, во-вторых имеет свободную переменную $x$, и в третьих содержит утверждение о недоказуемости $x$, преобразованного в формулу, ссылающуюся на саму себя. Тогда если мы подставим вместо $x$ номер $g(P)$, то получим $P(g(P))$, а это то что нам и требовалось.

Действительно, предположим, что $P(g(P))$ доказуемо. По определению это означает, что $\forall y q(y, g(P))$ и то есть $P(g(P))$ не может быть доказано. Противоречие.

Предположим обратное. Пусть доказуемо отрицание $\neg P(g(P))$. Это значит, что $\exists y \neg q(y, g(P))$, то есть существует доказательство $P(g(P))$, и последнее должно быть истинно. Опять же противоречие.

Мы получили, что ни предложение $P(g(P))$ ни $\neg P(g(P))$ действительно не могут быть доказаны, а это и есть утверждение о неполноте. \qed

Обещанную лемму мы теперь сформулируем так:

{\bfseries Лемма 1.} Существует такая нумерация формул и доказательств, что в этой нумерации возможно определить формулы $pf(x, y)$ и $\pi^x_n(g(F))$, где $\pi^x_n$ по номеру формулы $F(x)$ даёт номер формулы, в которой свободная переменная $x$ заменена натуральным числом $n$.

Формула $\pi^x_n(g(F))$ необходима для того, чтобы иметь возможность сформулировать $q(n, F(x))$ — без неё мы не могли бы подставить вместо $x$ какое-либо значение.

Доказательство и уточнение формулировки мы проведём чуть ниже, а пока докажем сразу и вторую теорему:

{\bfseries Доказательство второй теоремы.} Опять же мы приведём лишь набросок доказательства, а повысим планку строгости в следующем параграфе. Мы пока допустим здесь некоторую вольность, и не будем различать сами формулы и их номера, поскольку именно в данном доказательстве это и не принципиально. Пусть $p$ — недоказуемая ({\slshape гёделевская}) формула, введённая при доказательстве первой теоремы. Тот факт, что она недоказуема, было нами строго доказано, то есть если ввести формулу $P(f) = \exists x, pf(x, f)$, то мы можем утверждать, что $ZF\vdash \neg P(p)$. Однако теперь можно вспомнить смысл формулы $p$, который формулируется так: «Данное предложение не может быть доказано». Но если мы доказали $\neg P(p)$, то мы значит доказали её недоказуемость, и, соответственно доказали $p$! Это похоже на порочный круг, приводящий к противоречиям, и нам надо разобраться откуда он появился. Проблема собственно в последнем следствии, которое мы сделали: из $\neg P(x)$ мы предположили, что не может быть одновременно с тем $P(x)$, то есть мы сделали предположение о непротиворечивости теории. Значит, это предположение было ложным, и такое предположение мы делать не имели права. Важно, что речь тут идёт не о реальной противоречивости теории, а лишь о предположении непротиворечивости.

Несколько поднимем планку строгости и рассмотрим приведённое рассуждение более формально. Пусть $Con(ZF)$ — формула, соответствующая непротиворечивости ZF (её можно определить, например, как $\neg P(\exists x\not=x)$, поскольку $\exists x \not= x$ выводима тогда и только тогда, когда ZF противоречива). В предположении непротиворечивости ZF, и, следовательно, невыводимости $p$, мы можем утверждать существование моделей, в которых $p$ истинно, и моделей, в которых $p$ ложно. В одном случае будет выполняться импликация $Con(ZF)\rightarrow p$, в другом случае импликация $Con(ZF)\rightarrow \neg p$. Мы предполагаем, что мы можем доказать непротиворечивость ZF, то есть $ZF\vdash P(Con(ZF))$. Довольно легко видеть, однако, что если $T\vdash P(A)$ и $T\vdash P(A\rightarrow B)$, то так же $T\vdash P(B)$. Получается, что в некоторых моделях при предположении $P(Con(ZF))$ будет $P(p)$, а в некоторых $P(\neg p)$, однако обе эти формулы противоречат определению $p$ и первой теореме Гёделя о неполноте. Следовательно, моделей, в которых $P(Con(ZF))$, не существует (что однако не говорит ничего об истинности самого $Con(ZF)$). \qed

Отмечу, что я приводил доказательство для ZF лишь для того, чтобы не отвлекаться на лишние слова. То же самое доказательство можно провести в рамках любой теории, которая допускает определение натуральных чисел.

Докажем теперь используемые нами предположения из этих двух доказательств. Начнём с упомянутого во втором доказательстве утверждения, поскольку оно проще и короче.

{\bfseries Лемма 2.} Если $T\vdash P(A)$ и $T\vdash P(A\rightarrow B)$, то и $T\vdash P(B)$.

{\bfseries Доказательство.} Обратим вначале внимание на то, что $T\vdash X$, тогда и только тогда, когда $T\vdash P(X)$ по определению $P$. Тогда:

1) $T\vdash P(A)$  по условию;

2) $T\vdash A$ по определению $P$;

3) $T\vdash P(A\rightarrow B)$ по условию;

4) $T\vdash A \rightarrow B$ по определению $P$;

5) $T\vdash B$ по правилу modus ponens из 2 и 4;

6) $T\vdash P(B)$ по определению $P$. \qed

Доказательство леммы 1 требует однако некоторых знаний из базовой арифметики и теории чисел. Мы пока этим не занимались, и поэтому провести полноценное доказательство не сумеем. Тем не менее, сформулировать доказательство нам удастся почти целиком, так как свойства чисел используются лишь в одном небольшом фрагменте, который останется пока недоказанным, и закроем эту дырку мы в следующей главе.

Сразу заметим, что перенумеровать все формулы и доказательства вообще говоря не составляет труда: мы можем расположить все формулы по порядку возрастания их длины, а формулы одинаковой длины мы можем расположить «по алфавиту» (задав некоторый порядок символов). Доказательства формул можно перенумеровать аналогично. Такой порядок доказывает саму возможность нумерации, но ниже мы увидим, что он не позволит целиком доказать лемму. Пока мы будем использовать его, а ниже станет понятно какой именно нумерация должна быть, чтобы удовлетворить нашим запросам, и уже с этим знанием сформулируем требуемую нумерацию в третьей главе.

Конструировать формулу $pf(x, y)$ мы будем в виде последовательности лемм, объединение которых и даст нам требуемое доказательство.

Во-первых, вспомним, что доказательство — это конечная последовательность формул $(x_1, \ldots, x_n) \in \mathbb{N}^n$. В формуле $pf(x, y)$ первым параметром является гёделевский номер такой последовательности, определяемый инъективным отображением $G: \mathbb{N}^n \to \mathbb{N}$. Нам надо доказать здесь две вещи: во-первых, что нашу нумерацию мы можем выразить в ZF, и во вторых, что мы всегда можем построить отображение, обратное к нему. Этому соответствуют следующие две даже более общие леммы:

{\bfseries Лемма 3.} Для любого $S\subset \mathbb{N}^n$ существует инъекция $S \to \mathbb{N}$.

{\bfseries Доказательство.} В качестве упражнения. В дальнейшем мы будем доказывать более общее утверждение. \qed

Обратите внимание, что данная лемма утверждает лишь возможность построить функцию (в отличие от формулы ZF) для нумерации доказательств, но не формул. То есть хоть мы и можем сопоставить каждой формуле гёделевский номер, мы не сможем построить функцию — областью определения в этом случае является набор формул, который мы не имеем права рассматривать как множество в соответствии с нашей формальной аксиоматикой (это та же причина, по которой Comprehension Scheme и Replacement Scheme мы формулировали как бесконечный набор аксиом, а не через кванторы).

{\bfseries Лемма 4.} Для любого отношения существует обратное.

{\bfseries Доказательство.} Элементарно. Пусть $r\subset A\times B$. Тогда обратное отношение определяется как $\{(b, a)\in B\times A|(a, b)\in r\}$. \qed

Итак, на данном этапе мы имеем конечную последовательность $(x_1, \ldots, x_n)$ и номер формулы $y$. Теперь, используя композицию с $G$, мы можем свести задачу построения функции $pf$ к построению аналогичной функции, но только работающей не с номером доказательства, а с последовательностью номеров формул. Когда у нас есть последовательность формул, мы должны во-первых показать $x_n = y$, и во-вторых показать, что сама последовательность является последовательностью корректных выводов.

{\bfseries Лемма 5.} Для любой конечной последовательности $s = (x_1, \ldots, x_n)$ и любого $i\le n$ возможно построить функцию проекции $p_i: (x_1, \dots, x_n)\mapsto x_i$.

{\bfseries Доказательство.} Здесь под знаком $i \le n$ подразумевается $i \subset n$ — именно так определяется отношение порядка на натуральных числах, как мы это увидим в следующей главе. Каждая конечная последовательность — это функция $f\in\mathbb{N}^n$. Тогда требуемая проекция — это значение $f(i)$. \qed

{\bfseries Лемма 6.} Из любой конечной последовательности $s = (x_1, \ldots, x_n)$ можно получить множество её элементов.

{\bfseries Доказательство.} Поскольку $s$ — функция, то множество элементов последовательности будет множеством значений этой функции $\mathrm{Im} s$. \qed

{\bfseries Лемма 7.} Из любой конечной последовательности $s = (x_1, \ldots, x_n)$ можно получить начальный отрезок этой последовательности $s_i = \{x_1, \ldots, x_i\}$

{\bfseries Доказательство.} Достаточно взять ограничение $s\cap i\times \mathbb{N}$. \qed

Пользуясь этими леммами мы легко можем получить последний элемент последовательности $x_n$ для сравнения его с $y$. Так же мы легко можем рассмотреть любой начальный фрагмент последовательности, чтобы убедиться в том, что каждый номер в нем действительно является корректным следствием предыдущих номеров.

Следствие — это значит некоторое правило вывода. Например, правило вывода modus ponens можно определить как $mp: g(a), g(a\rightarrow b)\mapsto g(b)$. Если определить множество всех правил вывода за $R$, то отношение, проверяющее, что $y$ следует из последовательности $s$ можно легко сформулировать с помощью формулы $\exists u\in \mathrm{Im} s \exists v \in \mathrm{Im} s \exists r\in R ((u, v), y) \in r$.

Здесь мы предположили, что все правила в качестве начальных параметров берут два номера формул. Это легко обобщается на случай многих входных параметров.

Единственное, что нам осталось для написания формулы $pf$ — это определить множество $R$, то есть сформулировать на языке формальных формул все правила вывода как арифметические операции над номерами. Здесь уже возникает проблема. Получить формулу по номеру мы на самом деле не можем — отображения из формул на натуральные числа вообще говоря не существует, поскольку формулы теории ZF вообще не образуют множество, они являются лишь предложениями языка, на котором мы описываем нашу теорию. Поэтому здесь и возникает потребность не просто в абы какой нумерации формул, а именно в нумерации, которая позволяла бы легко на языке ZF формулировать правила вывода. На данный момент мы такую нумерацию определить не способны, потому что здесь потребуются уже базовые свойства чисел, о чем мы будем говорить лишь в следующей главе.

Аналогичная ситуация с определением функции $\pi^x_n$. Здесь прежде всего надо уточнить что именно она делает. Фраза «заменяет вхождения $x$ на $n$» звучит просто и понятно, но на самом деле не совсем корректна, поскольку $x$ — свободная переменная, а $n$ — вполне конкретное натуральное число, являющееся вполне конкретным множеством в нашей терминологии. Поэтому в действительности замена, которая происходит, может неформально быть описана функцией $\pi^x_n: F(x)\mapsto \exists x F(x)\wedge x=n$. Осталось только описать это на языке арифметики, чтобы работа велась не с формулами (на это мы не имеем права с формальной точки зрения), а с натуральными числами. Здесь та же ситуация что и с определениями правил вывода: для того чтобы легко манипулировать формулами на языке их номеров, нам нужна соответствующая нумерация. Эту дырку в доказательстве мы закроем в следующей главе.

Теперь, если по клочкам собрать в единое целое все написанное выше, то мы как раз и получим формулу для $pf$. Выглядеть она будет совершенно чудовищно (и я даже не уверен записывал ли её реально хоть кто-нибудь), но однако мы доказали её существование за вычетом нумерации. Этим доказательство первой теоремы Гёделя можно считать завершённым.

В качества фаталити предлагаю попробовать доказать следующие две теоремы:

{\bfseries Упражнение.} Докажите, что для любой формулы $\phi$ с одной свободной переменной существует предложение $\psi$, такое, что $ZF\vdash \psi \leftrightarrow \phi(g(\psi))$.

{\bfseries Упражнение.} Применив утверждение прошлого упражнения, докажите {\slshape теорему Тарского о неопределяемости истины}: не существует формулы, которая по гёделевскому номеру могла бы сказать является ли предложение, соответствующим данному номеру, истинным или ложным.
